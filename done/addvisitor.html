<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add Visitor</title>
  </head>
  <body>
    <h2>Add Visitor</h2>
    <label for="visitor_name">Visitor Name:</label>
    <input type="text" id="visitor_name" required /><br />

    <label for="apartment_number">Apartment Number:</label>
    <input type="text" id="apartment_number" required /><br />

    <label for="contact_number">Contact Number:</label>
    <input type="text" id="contact_number" required /><br />

    <label for="visit_date">Visit Date:</label>
    <input type="date" id="visit_date" required /><br />

    <label for="resident_id">Resident ID:</label>
    <input type="text" id="resident_id" required /><br />

    <!-- New input field for reason_for_visit -->
    <label for="reason_for_visit">Reason for Visit:</label>
    <input type="text" id="reason_for_visit" required /><br />

    <button type="button" onclick="addVisitor()">Add Visitor</button>

    <script>
      function addVisitor() {
        const visitor_name = document.getElementById("visitor_name").value;
        const apartment_number =
          document.getElementById("apartment_number").value;
        const contact_number = document.getElementById("contact_number").value;
        const visit_date = document.getElementById("visit_date").value;
        const resident_id = document.getElementById("resident_id").value;
        const reason_for_visit =
          document.getElementById("reason_for_visit").value; // New line

        const data = {
          visitor_name,
          apartment_number,
          contact_number,
          visit_date,
          resident_id,
          reason_for_visit, // New line
        };

        fetch("http://localhost:3000/addVisitor", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        })
          .then((response) => {
            if (!response.ok) {
              throw new Error("Error adding visitor");
            }
            return response.text();
          })
          .then((data) => {
            console.log(data);
            alert("Visitor added successfully!");
            // You can redirect or perform additional actions here
          })
          .catch((error) => {
            console.error("Error:", error);
            alert("Error adding visitor");
          });
      }
    </script>
  </body>
</html>
